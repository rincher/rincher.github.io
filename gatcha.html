<html>
    <head>
        <!-- Theme CSS -->
        <link id="theme-style" rel="stylesheet" href="assets/css/theme-1.css" />

        <!-- Jquery CDN -->
        <script
            src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"
        ></script>
        <script>
            function newGatcha(){
                $("#result").empty();
                let username = $("#userName").val()
                let gamename = $("#gameName").val()
                let moneySpent = $('#moneySpent').val()
                $.ajax({
                    type : "POST",
                    url : "http://localhost:8080/gatcha/new",
                    contentType : "application/json",
                    data : JSON.stringify({
                        userName : username,
                        gameName : gamename,
                        moneySpent : moneyspent
                    }),
                    success: function (response){
                        let result = response;
                        console.log(response)
                        let temp_html = `<p> ${result}</p>`;
                        $('#result').append(temp_html);
                    }
                })
            }

            function updateGatcha(){
                $("#result").empty();
                let username = $("#userName").val()
                let gamename = $("#gameName").val()
                let moneySpent = $('#moneySpent').val()
                $.ajax({
                    type : "POST",
                    url : "http://localhost:8080/gatcha/update",
                    contentType : "application/json",
                    data : JSON.stringify({
                        userName : username,
                        gameName : gamename,
                        moneySpent : moneySpent
                    }),
                    success : function(response){
                        let result = response;
                        console.log(response)
                        let temp_html = `<p> ${result} </p>`;
                        $('#result').append(temp_html);
                    }
                })
            }

            function queryGatcha(){
                $("#result").empty();
                let username = $("#userName").val()
                let query = $("#query").val()
                $.ajax({
                    type : "POST",
                    url : "http://localhost:8080/gatcha/exchange",
                    contentType : "application/json",
                    data : JSON.stringify({
                        userName : username,
                        query : query
                    }),
                    success : function (response){
                        let product_name = response;
                        console.log(response)
                        let temp_html = `<p> ${product_name}</p>`;
                        $('#result').append(temp_html);
                    }
                })
            }

            function getTotal(){
                $("#result").empty();
                let username = $("#userName").val()
                $.ajax({
                    type : "POST",
                    url : "http://localhost:8080/gatcha/total",
                    contentType : "application/json",
                    data : JSON.stringify({
                        userName : username
                    }),
                    success : function (response){
                        let totalPrice = response;
                        console.log(response);
                        let temp_html = `<p> ${totalPrice} </p>`;
                        $("#result").append(temp_html);
                    }
                })
            }
        </script>
    </head>
    <body>
        <div>
            <h1> New Gatcha </h1>
            userName <input type="text" id="userName">
            gameName <input type="text" id="gameName">
            moneySpent <input type="number" id="moneySpent">
            Query <input type="text" id="query">
        <button onclick="newGatcha()">new</button>
        <button onclick="updateGatcha()">update</button>
        <button onclick="getTotal()">total</button>
        <button onclick="queryGatcha()">query</button>

        <div id="result">
            <p id="test"></p>
            
        </div>
    </body>
</html>